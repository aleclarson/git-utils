// Generated by CoffeeScript 1.12.4
var assertValid, exec, git, isValid, optionTypes;

assertValid = require("assertValid");

isValid = require("isValid");

exec = require("exec");

git = require("./core");

optionTypes = {
  soft: "boolean?",
  hard: "boolean?"
};

module.exports = git.resetBranch = function(modulePath, commit, options) {
  var hardness;
  if (isValid(commit, "object")) {
    options = commit;
    commit = "HEAD";
  } else {
    if (options == null) {
      options = {};
    }
  }
  assertValid(modulePath, "string");
  assertValid(options, optionTypes);
  if (commit === null) {
    return exec.async("git update-ref -d HEAD", {
      cwd: modulePath
    }).then(function() {
      return options.hard && exec.async("git reset --hard", {
        cwd: modulePath
      });
    });
  } else {
    if (commit == null) {
      commit = "HEAD";
    }
    assertValid(commit, "string|null");
    hardness = options.hard ? "--hard" : options.soft ? "--soft" : "--mixed";
    return exec.async("git reset", [hardness, commit], {
      cwd: modulePath
    });
  }
};
